'use strict';
/*
Interval v1.0.31
fedeghe <fedeghe@gmail.com>
A really simple function to provide a better timing to replace the setInterval
*/
var interval=function(){function t(){return+new Date}function i(t){return"function"==typeof t}function s(t,i,s){i in t.subscribers&&t.subscribers[i].forEach(function(i){i(Object.assign({},s,{i:t}))})}function e(i,s){var e,n=i.EndTime-i.StartTime,r=t()-i.StartTime,u=r-i.pauses,h=i.definite?n-r+i.pauses:void 0;return h=Math.max(0,h),e=i.definite?parseFloat((100-100*h/n).toFixed(3),10):void 0,s&&(h=0,e=100),{at:t(),i:i,cycle:i.cycle-i.addedCycles,elapsed:r,effective:u,remaining:h,progress:e,status:i.status}}function n(i){var s=t(),e=i.StartTime+(i.cycle+1)*i.tick,n=s+i.tick,r=e-n;return i.tick+r}function r(t,i){this.tick=i,this.StartTime=null,this.EndTime=null,this.status="init",this.pauses=0,this.cycle=0,this.endsAfter=0,this.addedCycles=0,this.finalTo=null,this.tickerTo=null,this.started=!1,this.sliding=!1,this.definite=!1,this.subscribers={start:[],pause:[],resume:[],end:[],tune:[],tick:[],err:[]},this.onTick(t)}return r.prototype.getStatus=function(){return e(this)},r.prototype.tune=function(i){if(!this.definite)return this;var n,r,u,h=t(),o=parseInt(i,10);return this.EndTime+=o,n=h-this.StartTime-this.pauses,u=this.EndTime-this.StartTime,r=u-n,o&&(clearTimeout(this.finalTo),r>0&&this.endsIn(r),s(this,"tune",Object.assign({},e(this),{ms:i}))),this},r.prototype.endsIn=function(t){return this.endsAfter=Math.abs(parseInt(t,10)),this.definite=!0,this.resetEnd(),this},r.prototype.resetEnd=function(){var t=this;this.finalTo&&clearTimeout(this.finalTo),this.finalTo=setTimeout(function(){t.end()},this.endsAfter)},r.prototype.run=function(i){if("error"===this.status)return this;this.StartTime=this.StartTime||t(),this.definite&&(this.EndTime=this.EndTime||this.StartTime+this.endsAfter);var r=this,u=n(this);return this.started||(this.started=!0,this.status="running",i&&this.onStart(i,!0),s(this,"start",e(this)),this.definite&&this.resetEnd()),this.tickerTo=setTimeout(function(){if(["ended","error"].includes(r.status))return r;var t=e(r);try{"running"===r.status&&s(r,"tick",t),r.cycle++}catch(i){r.status="error",s(r,"err",Object.assign(t,{error:i}))}r.run()},u),this},r.prototype.pause=function(i){return this.status="paused",s(this,"pause",e(this)),this.sliding=!!i,this.definite&&clearTimeout(this.finalTo),this.pauseStart=t(),this},r.prototype.resume=function(){this.status="running",s(this,"resume",e(this));var i,n,r,u=t(),h=u-this.pauseStart;return this.addedCycles+=~~(h/this.tick),this.pauses+=this.sliding&&h,this.definite&&(i=u-this.StartTime-this.pauses,n=this.EndTime-this.StartTime,r=n-i,this.endsAfter=r,this.resetEnd()),this.sliding=!1,this},r.prototype.end=function(){return this.status="ended",s(this,"end",e(this,!0)),this},r.prototype.onStart=function(t,i){return this.subscribers.start[i?"unshift":"push"](t),this},r.prototype.onPause=function(t){return i(t)&&this.subscribers.pause.push(t),this},r.prototype.onResume=function(t){return i(t)&&this.subscribers.resume.push(t),this},r.prototype.onTick=function(t){return i(t)&&this.subscribers.tick.push(t),this},r.prototype.onErr=function(t){return i(t)&&this.subscribers.err.push(t),this},r.prototype.onEnd=function(t){return i(t)&&this.subscribers.end.push(t),this},r.prototype.onTune=function(t){return i(t)&&this.subscribers.tune.push(t),this},r.prototype.at=function(t,i){var s=this;return setTimeout(function(){i({i:s})},t),this},function(t,i){return new r(t,i)}}();"object"==typeof exports&&(module.exports=interval);