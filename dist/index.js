'use strict';
/*
Interval v1.0.21
fedeghe <fedeghe@gmail.com>
A really simple function to provide a better timing to replace the setInterval
*/
var interval=function(){function t(){return+new Date}function i(t){return"function"==typeof t}function e(t,i){var e=!1;switch(t.status){case r.init:e=i===r.running;break;case r.running:e=[r.running,r.paused,r.ended].includes(i);break;case r.paused:e=[r.running,r.ended].includes(i)}return e=e||i===r.error,e&&(t.status=i),e}function s(t,i,e){e=e||{},i in t.subscribers&&t.subscribers[i].forEach(function(i){i(Object.assign({},e,{instance:t}))})}function n(t,i){this.tick=i,this.StartTime=null,this.status=r.init,this.definite=!1,this.definiteDown=!1,this.definiteTo=null,this.sliding=!1,this.pauses=0,this.pauseStart=null,this.cycle=0,this.subscribers={start:[],pause:[],resume:[],end:[],tick:[],err:[]},this.to=null,this.addedCycles=0,this.onTick(t)}var r={init:"init",running:"running",paused:"paused",ended:"ended",error:"error"};return n.prototype.run=function(i){if(e(this,r.running)){this.StartTime=this.StartTime||t();var n=this,u=t(),h=this.StartTime+(this.cycle+1)*this.tick,o=u+this.tick,c=h-o,a=this.tick+c;return i&&(this.onStart(i),s(this,"start")),this.to=setTimeout(function(){if([r.ended,r.paused,r.error].includes(n.status))return n;try{var i=t()-n.StartTime,u=i-n.pauses,h=n.definite?n.definite-i+n.pauses:void 0,o=n.definite?parseFloat((100*h/n.definite).toFixed(3),10):void 0;s(n,"tick",{cycle:n.cycle-n.addedCycles,elapsed:i,effective:u,remaining:h,percentage:o}),n.cycle++}catch(t){e(n,r.error),s(n,"err",{error:t})}n.run()},a),this}},n.prototype.pause=function(i){return e(this,r.paused)?(s(this,"pause"),this.sliding=!!i&&this.definite,clearTimeout(this.to),this.definite&&clearTimeout(this.definiteTo),this.pauseStart=t(),this):this},n.prototype.resume=function(){if(!e(this,r.running))return this;var i,n=this,u=t(),h=u-this.pauseStart;return this.pauses+=h,this.addedCycles+=~~(h/this.tick),this.cycle+=this.addedCycles,i=u-this.StartTime-(this.sliding?this.pauses:0),this.definiteDown=this.definite-i,this.sliding=!1,this.run(),s(this,"resume"),this.definite&&(this.definiteTo=setTimeout(function(){n.end()},this.definiteDown)),this},n.prototype.endsIn=function(t){var i=this;return this.definite=Math.abs(parseInt(t,10)),this.definiteTo&&clearTimeout(this.definiteTo),this.definiteTo=setTimeout(function(){i.end()},this.definite),this},n.prototype.end=function(){if(e(this,r.ended))return s(this,"end"),this},n.prototype.onStart=function(t){return i(t)&&this.subscribers.start.push(t),this},n.prototype.onPause=function(t){return i(t)&&this.subscribers.pause.push(t),this},n.prototype.onResume=function(t){return i(t)&&this.subscribers.resume.push(t),this},n.prototype.onTick=function(t){return i(t)&&this.subscribers.tick.push(t),this},n.prototype.onErr=function(t){return i(t)&&this.subscribers.err.push(t),this},n.prototype.onEnd=function(t){return i(t)&&this.subscribers.end.push(t),this},function(t,i){return new n(t,i)}}();"object"==typeof exports&&(module.exports=interval);